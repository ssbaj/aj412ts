#e_ecos

e_ecos<-function(explaining=0){
if(explaining==0) {

invisible(readline(prompt="Press [enter] to continue"))
cat("\014")
cat("     ", '\n')
cat("     ", '\n')
cat("#------------------------------------------------------ ", '\n')
cat("# apkey 다운로드 받는 곳 ", '\n')
cat("# https://ecos.bok.or.kr/api/#/AuthKeyApply ", '\n')
cat("  ", '\n')
cat("# ECOS자료 Code Book ", '\n')
cat("  https://ecos.bok.or.kr/api/#/DevGuide/StatisticalCodeSearch ", '\n')
cat("  ", '\n')
cat(" library(ecos); library(dplyr); library(aj412s); library(aj412ts)", '\n')
cat(" library(xts); library(mFilter)", '\n')
cat(" ecos.setKey(api_key = '당신의 api키를 입력하세요') ", '\n')
cat(" set_data<-c('PDA G09W ELCA88 XHMB9I J1RNMGX SHBIMX') ", '\n')
invisible(readline(prompt="Press [enter] to continue"))
cat("\014")
cat("     ", '\n')
cat("     ", '\n')
cat("# lambda의 설정 ------------- ", '\n')
cat("# 월별(month)자료의 lambda=14400 / 분기별(quarter) 자료의 lambda=1600 ", '\n')
cat("# 연간(yearly)자료의 lambda=100 ", '\n')
cat(" ", '\n')
cat("# 계절조정된 자료를 다운받아 사용함 ", '\n')
cat(" gdp <- statSearch(stat_code='200Y104', item_code1='1400', cycle='Q') # 분기별 GDP   ", '\n')
cat(" gdp <- simple_ecos(gdp, '2010') # 분기별자료를 2010년부터 현재까지 솎아내기 ", '\n')
cat("  ", '\n')
cat(" library(mFilter)  ", '\n')
cat(" gdp<-as.data.frame(gdp)  ", '\n')
cat(" hp.gdp <- hpfilter(gdp$data, freq = 1600)  ", '\n')
cat(" hp_gdp <- data.frame( gdp$DATE, hp.gdp$trend, hp.gdp$cycle) ", '\n')
cat(" colnames(hp_gdp) <- c('DATE', 'trend', 'cycle') ", '\n')
cat(" hp_gdp$Q잠재성장률 <- (hp_gdp$trend - dplyr::lag(hp_gdp$trend) ) / dplyr::lag(hp_gdp$trend)", '\n')
cat(" hp_gdp <- hp_gdp[-c(1), ]", '\n')
cat("  ", '\n')
invisible(readline(prompt="Press [enter] to continue"))
cat("\014")
cat("     ", '\n')
cat("     ", '\n')
cat(" # 연이율로 변경한 잠재성장률 ", '\n')
cat(" hp_gdp$Y잠재성장률 <- (hp_gdp$Q잠재성장률)*4   ", '\n')
cat("  ", '\n')
cat(" # 잠재성장률 그래프 -- xts자료형태로 전환 후 그래프로 보기 ", '\n')
cat(" # xts_Y잠재성장률 <- xts(hp_gdp$Y잠재성장률, order.by=hp_gdp$DATE) ", '\n')
cat(" # plot(xts_Y잠재성장률, main = '잠재성장률(연기준)', col = 'blue') ", '\n')
cat(" plot(hp_gdp$DATE, hp_gdp$Y잠재성장률, main = '잠재성장률(연기준)', col = 'blue')   ", '\n')
cat("  ", '\n')
cat(" # 순환변동 사이틀 그래프 -- xts자료형태로 전환 후 그래프로 보기", '\n')
cat(" # xts_순환변동 <- xts(hp_gdp$cycle, order.by=hp_gdp$DATE)   ", '\n')
cat(" # plot(xts_순환변동, main = '월별자료', col = 'blue')   ", '\n')
cat(" plot(hp_gdp$DATE, hp_gdp$cycle, main = '순환변동 그래프(분기별)', col = 'blue')   ", '\n')
cat("  ", '\n')
cat("# 전산업생산지수 <- simple_ecos(전산업생산지수, '2015') # Monthly자료를 Quarterly자료로 전환하자", '\n')
cat(" # 전산업생산지수 그래프 -- xts자료형태로 전환 후 그래프로 보기", '\n')
cat("# TMP <- xts(전산업생산지수$data, order.by=전산업생산지수$DATE) ", '\n')
cat("# apply.yearly( TMP[, 1], FUN=colMeans ) ", '\n')
cat("    ", '\n')
invisible(readline(prompt="Press [enter] to continue"))
cat("\014")
cat("     ", '\n')
cat("     ", '\n')
cat("\033[1;32m# xts를 ts로 전환하는 방법 -------------   \033[0m", '\n')
cat("# library(dsa)  ", '\n')
cat("# tmp <- xts2ts(xtsdata)  ", '\n')
cat("    ", '\n')
cat("\033[1;32mCreate Time Series Objects ------------- \033[0m ", '\n')
cat(" CD91일수익률   <- statSearch(stat_code='721Y001', item_code1='2010000', cycle='M')   ", '\n')
cat(" 국채10년수익률 <- statSearch(stat_code='721Y001', item_code1='5050000', cycle='M')   ", '\n')
cat(" CP91일수익률   <- statSearch(stat_code='721Y001', item_code1='4020000', cycle='M')   ", '\n')
cat(" Call금리 <- statSearch(stat_code='721Y001', item_code1='1020000', cycle='Q') ", '\n')
cat("  ", '\n')
cat(" gdp연간 <- statSearch(stat_code='200Y106', item_code1='1400', cycle='A') # 연간 GDP  ", '\n')
cat(" gdp분기 <- statSearch(stat_code='200Y104', item_code1='1400', cycle='Q') # 분기별 GDP  ", '\n')
cat(" 한국경제성장률 <- statSearch(stat_code='902Y015', item_code1='KOR', cycle='Q') #한국경제성장률 ", '\n')
cat(" 중국경제성장률 <- statSearch(stat_code='902Y015', item_code1='CHN', cycle='Q') #중국경제성장률 ", '\n')
cat(" 일본경제성장률 <- statSearch(stat_code='902Y015', item_code1='JPN', cycle='Q') #일본경제성장률 ", '\n')
cat(" 미국경제성장률 <- statSearch(stat_code='902Y015', item_code1='USA', cycle='Q') #미국경제성장률 ", '\n')
cat("  ", '\n')
cat(" 월별소비자물가지수 <- statSearch(stat_code='901Y009',item_code1='0',cycle='M') ", '\n')
cat(" 전년동기대비인플레이션 <- 100*(tscpi_m/stats::lag(tscpi_m, 12) -1 ) ", '\n')
cat(" M2평잔 <- statSearch(stat_code='101Y003', item_code1='BBHS00', cycle='M') ", '\n')
cat(" 경상수지 <- statSearch(stat_code='902Y009', item_code1='KR', cycle='Q') ", '\n')
cat(" 소비자물가지수 <- statSearch(stat_code='901Y009', item_code1='0', cycle='M')  ", '\n')
cat(" 제조업재고율 <- statSearch(stat_code='901Y026', item_code1='I33A', cycle='M')  ", '\n')
cat(" 전산업생산지수 <- statSearch(stat_code='901Y033', item_code1='A00', item_code2='2', cycle='M') ", '\n')
cat(" 노동생산성 <- statSearch(stat_code='901Y107', item_code1='A', item_code2='I70B', cycle='Q')  # 산업생산기준/ 제조업 ", '\n')
cat("  ", '\n')
invisible(readline(prompt="Press [enter] to continue"))
cat("\014")
cat("     ", '\n')
cat("     ", '\n')
cat("  ", '\n')
cat(" 국내건설수주액 <- statSearch(stat_code='901Y020', item_code1='I42ABAA', cycle='M') # 건축.주택 ", '\n')
cat(" 건설기성액 <- statSearch(stat_code='901Y104', item_code1='I48ABA', item_code2='I37C', cycle='M') # 건축.계절조정 ", '\n')
cat(" 건축착공현황 <- statSearch(stat_code='901Y103', item_code1='2', item_code2='I47ABA', cycle='M') # 동수.주거용 ", '\n')
cat(" 건축허가현황 <- statSearch(stat_code='901Y037', item_code1='I43ABA', item_code2='2', cycle='M') # 동수.주거용 ", '\n')
cat("  ", '\n')
cat(" 미분양주택현황_전국 <- statSearch(stat_code='901Y074', item_code1='I410A', cycle='M') # 전국 ", '\n')
cat(" 미분양주택현황_수도권 <- statSearch(stat_code='901Y074', item_code1='I410R', cycle='M') # 수도권 ", '\n')
cat(" 미분양주택현황_서울 <- statSearch(stat_code='901Y074', item_code1='I410B', cycle='M') # 서울 ", '\n')
cat(" 미분양주택현황_경기 <- statSearch(stat_code='901Y074', item_code1='I410I', cycle='M') # 경기 ", '\n')
cat(" 미분양주택현황_인천 <- statSearch(stat_code='901Y074', item_code1='I410E', cycle='M') # 인천 ", '\n')
cat("  ", '\n')
cat(" 주택건설인허가실적_전국 <- statSearch(stat_code='901Y105', item_code1='ALL', cycle='M') # 전국 ", '\n')
cat(" 주택건설인허가실적_서울 <- statSearch(stat_code='901Y105', item_code1='SEO', cycle='M') # 서울 ", '\n')
cat(" 주택건설인허가실적_경기 <- statSearch(stat_code='901Y105', item_code1='GYE', cycle='M') # 경기 ", '\n')
cat(" 주택건설인허가실적_인천 <- statSearch(stat_code='901Y105', item_code1='INC', cycle='M') # 인천 ", '\n')
cat("  ", '\n')
invisible(readline(prompt="Press [enter] to continue"))
cat("\014")
cat("     ", '\n')
cat("     ", '\n')
cat("\033[1;31m전산업생산지수를 xts 그래프로 보기 ----------- \033[0m ", '\n')
cat(" 전산업생산지수 <- simple_ecos(전산업생산지수, '2015') ", '\n')
cat("\033[1;32m# simple_ecos()을 사용하면 데이터셋의 data가 전산업생산지수. yoy도 데이터셋에 저장됨 \033[0m ", '\n')
cat(" tmp_data <- xts(전산업생산지수$data, order.by=전산업생산지수$DATE) ", '\n')
cat(" plot(tmp_data, main = '월별자료', col = 'blue') ", '\n')
cat("\033[1;31m전산업생산지수를 ggplot2 그래프로 보기 ----------- \033[0m ", '\n')
cat(" ggplot(전산업생산지수, aes(x=DATE, y=data)) + geom_line() + theme_bw() ", '\n')
cat("  ", '\n')
}}
